<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DealStackr</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>DealStackr</h1>
      <div class="header-actions">
        <button id="scanButton" class="scan-button">Scan Offers</button>
        <button id="openDashboardButton" class="dashboard-button">Open Dashboard</button>
      </div>
    </header>

    <!-- Stack Potential Banner (shown on merchant sites) -->
    <div id="stackBanner" class="stack-banner" style="display: none;">
      <div class="stack-header">
        <span class="stack-icon">ðŸ’°</span>
        <span id="stackMerchant" class="stack-merchant">Merchant</span>
      </div>
      <div class="stack-content">
        <div id="stackConfidence" class="stack-confidence">
          <span class="confidence-label">Cashback:</span>
          <span id="confidenceValue" class="confidence-value">Checking...</span>
        </div>
        <div id="stackCardOffer" class="stack-card-offer" style="display: none;">
          <span class="card-offer-label">Card offer:</span>
          <span id="cardOfferValue" class="card-offer-value"></span>
        </div>
        <div id="stackTotal" class="stack-total" style="display: none;">
          <span class="stack-total-label">Potential stack:</span>
          <span id="stackTotalValue" class="stack-total-value"></span>
        </div>
      </div>
      <div id="stackPortals" class="stack-portals" style="display: none;">
        <span class="portals-label">Check:</span>
        <div id="portalLinks" class="portal-links"></div>
      </div>
    </div>

    <!-- Summary Row -->
    <div id="summaryRow" class="summary-row" style="display: none;">
      <span id="totalOffers">Total Offers: 0</span>
      <span id="chaseCount">Chase: 0</span>
      <span id="amexCount">Amex: 0</span>
      <span id="stackableCount" class="stackable-count" style="display: none;">Stackable: 0</span>
      <div class="summary-actions">
        <span id="cohortInfo" class="cohort-info"></span>
        <button id="exportButton" class="export-button">Export Cohort</button>
      </div>
    </div>

    <!-- Filters -->
    <div id="filters" class="filters" style="display: none;">
      <div class="filter-group">
        <label for="issuerFilter">Issuer:</label>
        <select id="issuerFilter">
          <option value="all">All</option>
          <option value="chase">Chase</option>
          <option value="amex">Amex</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="channelFilter">Channel:</label>
        <select id="channelFilter">
          <option value="all">All</option>
          <option value="online">Online</option>
          <option value="in_store">In-Store</option>
          <option value="unknown">Unknown</option>
        </select>
      </div>
    </div>

    <!-- Sort Controls -->
    <div id="sortControls" class="sort-controls" style="display: none;">
      <label for="sortBy">Sort by:</label>
      <select id="sortBy">
        <option value="merchant">Merchant (A-Z)</option>
        <option value="value-desc">Offer Value (High to Low)</option>
        <option value="issuer">Issuer</option>
      </select>
    </div>

    <!-- Loading State -->
    <div id="loadingState" class="loading-state" style="display: none;">
      <div class="spinner"></div>
      <p>Scanning offers...</p>
    </div>

    <!-- Empty States -->
    <div id="emptyState" class="empty-state">
      <p>Navigate to Chase or Amex Offers and click 'Scan Offers'.</p>
    </div>

    <div id="noOffersState" class="empty-state" style="display: none;">
      <p>No visible offers detected.</p>
    </div>

    <!-- Offers Table -->
    <div id="offersContainer" class="offers-container" style="display: none;">
      <table id="offersTable" class="offers-table">
        <thead>
          <tr>
            <th>Merchant</th>
            <th>Offer</th>
            <th>Card Type</th>
            <th>Channel</th>
          </tr>
        </thead>
        <tbody id="offersTableBody">
          <!-- Offers will be inserted here -->
        </tbody>
      </table>
    </div>

    <!-- Error State -->
    <div id="errorState" class="error-state" style="display: none;">
      <p id="errorMessage"></p>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>

