[build]
builder = "dockerfile"
dockerfilePath = "Dockerfile"

# Pass environment variables as build arguments for NEXT_PUBLIC_ vars
[build.args]
NEXT_PUBLIC_SUPABASE_URL = "${{NEXT_PUBLIC_SUPABASE_URL}}"
NEXT_PUBLIC_SUPABASE_ANON_KEY = "${{NEXT_PUBLIC_SUPABASE_ANON_KEY}}"
ADMIN_EMAIL = "${{ADMIN_EMAIL}}"

[deploy]
healthcheckPath = "/api/offers"
healthcheckTimeout = 30
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3
